{"mappings":"AACY,SAAHA,MAAMC,GAaC,QADD,IAAIC,OAXD,0NAWkB,KACzBC,KAAKC,UAAUH,IAM1B,MAAMI,MAAQC,aAAaC,QAAQ,SAC7BC,SAAWC,KAAKC,MAAML,OAC5B,IAAIM,QAAUC,EAAE,WACZC,EAAI,EACJC,QAAUN,SASd,SAASO,UACLH,EAAE,qHAEqEE,QAAQD,GAAGG,4DAChDF,QAAQD,GAAGZ,0JAG3CgB,aAAaN,SACfE,SAhBYK,IAAZJ,UACAA,QAAU,CAAC,CACPE,KAAM,qBACNf,IAAK,gBAgBba,QAAQK,SAAQ,KACZJ,aAGJH,EAAE,WAAWQ,GAAG,SAAS,KACrB,IACIC,EADApB,EAAMqB,OAAOC,OAAO,cAGpBF,GADmC,IAAnCpB,EAAIuB,QAAQ,QACE,WAAavB,GACK,IAAzBA,EAAIuB,QAAQ,SACLvB,EAAIwB,QAAQ,UAAW,YAEvBxB,EAElB,IAAIyB,EAAWzB,EACVwB,QAAQ,WAAY,IACpBA,QAAQ,UAAW,IACnBA,QAAQ,OAAQ,IAEjBzB,MAAMC,IACNa,QAAQa,KAAK,CACTX,KAAMK,EACNpB,IAAKyB,IAETX,WAEAa,MAAM,eAKJ,IAANC,MAAQ,KACRC,UAAY,GACZC,QAAU,GACVC,IAAMC,MAAMC,KAAKC,SAASC,iBAAiB,SAC/CJ,IAAIb,SAASkB,IACTA,EAAEC,iBAAiB,cAAc,KAC7BR,WAAa,IAAIS,KACjBV,MAAQW,YAAW,KACf5B,EAAE,mBAAmB6B,IAAI,UAAW,WACrC,QAEPJ,EAAEC,iBAAiB,YAAY,KACvBP,SAAW,IAAIQ,KACfG,aAAab,OACTE,QAAUD,UAAY,KACsB,SAAxClB,EAAE,mBAAmB6B,IAAI,YAEzBE,QAAQC,IAAI,cAOhC,IAAIC,KAAOjC,EAAE,QACbiC,KAAKzB,GAAG,SAASiB,IACb,GAAsC,QAAnCA,EAAES,OAAOC,QAAQC,eAA8D,QAAnCX,EAAES,OAAOC,QAAQC,eAAgE,UAArCX,EAAES,OAAOG,UAAUD,cAA0B,CACpIX,EAAEa,cAAcC,aAAa,QAAQ,gBACrC,IAAIC,EAAI,EACR,KAA6D,OAAtDf,EAAEa,cAAgBb,EAAEa,cAAcG,kBAA0BD,IACnEtC,QAAQwC,OAAOF,EAAE,EAAE,GACnBf,EAAEkB,kBAENlB,EAAEmB,0BAINlC,OAAOmC,eAAiB,KACpB,MAAMC,EAAQjD,KAAKkD,UAAU7C,SAC7BR,aAAasD,QAAQ,QAASF,IAGlC9C,EAAE,QAAQQ,GAAG,SAASiB,IACuB,YAArCA,EAAES,OAAOG,UAAUD,eACnBpC,EAAE,UAAU6B,IAAI,UAAU","sources":["project/web-nav/src/index.js"],"sourcesContent":["// 网址正则匹配\r\nfunction isURL(url) {\r\n    const strRegex = '^((https|http|ftp)://)?'//(https或http或ftp):// 可有可无\r\n        + '(([\\\\w_!~*\\'()\\\\.&=+$%-]+: )?[\\\\w_!~*\\'()\\\\.&=+$%-]+@)?' //ftp的user@ 可有可无\r\n        + '(([0-9]{1,3}\\\\.){3}[0-9]{1,3}' // IP形式的URL- 3位数字.3位数字.3位数字.3位数字\r\n        + '|' // 允许IP和DOMAIN（域名）\r\n        + '(localhost)|'    //匹配localhost\r\n        + '([\\\\w_!~*\\'()-]+\\\\.)*' // 域名- 至少一个[英文或数字_!~*\\'()-]加上.\r\n        + '\\\\w+\\\\.' // 一级域名 -英文或数字 加上.\r\n        + '[a-zA-Z]{1,6})' // 顶级域名- 1-6位英文\r\n        + '(:[0-9]{1,5})?' // 端口- :80 ,1-5位数字\r\n        + '((/?)|' // url无参数结尾 - 斜杆或这没有\r\n        + '(/[\\\\w_!~*\\'()\\\\.;?:@&=+$,%#-]+)+/?)$';//请求参数结尾- 英文或数字和[]内的各种字符\r\n    const re = new RegExp(strRegex, 'i'); // 大小写不敏感\r\n    if (re.test(encodeURI(url))) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nconst local = localStorage.getItem(`cache`)\r\nconst localObj = JSON.parse(local)\r\nlet $tagAdd = $(`.tagAdd`)\r\nlet i = 0\r\nlet hashMap = localObj\r\nif (hashMap === undefined) {\r\n    hashMap = [{\r\n        logo: `https://github.com`,\r\n        url: `github.com`\r\n    }\r\n    ]\r\n}\r\n\r\nfunction repaint() {\r\n    $(`\r\n            <li class=\"tag tagStyle\">\r\n                <div class=\"webLogo\"><img src=\"https://favicon.cccyun.cc/${hashMap[i].logo}\" alt=\"\"></div>\r\n                <div class=\"webUrl\">${hashMap[i].url}</div>\r\n                <div class=\"close\"><svg class=\"icon\" aria-hidden=\"true\"><use xlink:href=\"#icon-close\"></use></svg></div>\r\n            </li>`\r\n    ).insertBefore($tagAdd)\r\n    i++\r\n}\r\n\r\nhashMap.forEach(() => {\r\n    repaint()\r\n})\r\n\r\n$('.tagAdd').on('click', () => {\r\n    let url = window.prompt(`请输入你要添加的网址`)\r\n    let completeUrl\r\n    if (url.indexOf(`http` || `https`) === -1) {\r\n        completeUrl = `https://` + url\r\n    } else if (url.indexOf(`https`) === -1) {\r\n        completeUrl = url.replace(`http://`, `https://`)\r\n    } else {\r\n        completeUrl = url\r\n    }\r\n    let shortUrl = url\r\n        .replace(`https://`, ``)\r\n        .replace(`http://`, ``)\r\n        .replace(`www.`, ``)\r\n\r\n    if (isURL(url)) {\r\n        hashMap.push({\r\n            logo: completeUrl,\r\n            url: shortUrl\r\n        })\r\n        repaint()\r\n    } else {\r\n        alert('请输入正确的网址')\r\n    }\r\n})\r\n\r\n// 手机端长按\r\nlet timer = null\r\nlet startTime = ``\r\nlet endTime = ``\r\nlet tag = Array.from(document.querySelectorAll(`.tag`))\r\ntag.forEach((e) => {\r\n    e.addEventListener(`touchstart`, () => {\r\n        startTime = +new Date()\r\n        timer = setTimeout(() => {\r\n            $(`.tagList .close`).css(`display`, `block`)\r\n        }, 500)\r\n    })\r\n    e.addEventListener(`touchend`, () => {\r\n            endTime = +new Date()\r\n            clearTimeout(timer)\r\n            if (endTime - startTime < 700) {\r\n                if ($(`.tagList .close`).css(`display`) === `none`){\r\n                    // window.location = `https://`+(ele.currentTarget.children[1].innerText)\r\n                    console.log(`打开网站`)\r\n                }\r\n            }\r\n        }\r\n    )\r\n})\r\n\r\nlet $tag = $(`.tag`)\r\n$tag.on(`click`,(e)=>{\r\n    if(e.target.tagName.toLowerCase() === `svg` || e.target.tagName.toLowerCase() === `use` || e.target.className.toLowerCase() === `close`){  //定位在X上\r\n        e.currentTarget.setAttribute(`style`,`display:none`)\r\n        let i = 0;  // 遍历看自己是第几个儿子来删除对应的缓存\r\n        while((e.currentTarget = e.currentTarget.previousSibling) != null) i++;\r\n        hashMap.splice(i-1,1)\r\n        e.stopPropagation()\r\n    }\r\n    e.isPropagationStopped()\r\n})\r\n\r\n// localStorage\r\nwindow.onbeforeunload = () => {\r\n    const local = JSON.stringify(hashMap)\r\n    localStorage.setItem(`cache`, local)\r\n}\r\n\r\n$(`html`).on(`click`,(e)=>{\r\n    if (e.target.className.toLowerCase() !== `taglist`){\r\n        $(`.close`).css(`display`,`none`)\r\n    }\r\n})"],"names":["isURL","url","RegExp","test","encodeURI","local","localStorage","getItem","localObj","JSON","parse","$tagAdd","$","i","hashMap","repaint","logo","insertBefore","undefined","forEach","on","completeUrl","window","prompt","indexOf","replace","shortUrl","push","alert","timer","startTime","endTime","tag","Array","from","document","querySelectorAll","e","addEventListener","Date","setTimeout","css","clearTimeout","console","log","$tag","target","tagName","toLowerCase","className","currentTarget","setAttribute","i1","previousSibling","splice","stopPropagation","isPropagationStopped","onbeforeunload","local1","stringify","setItem"],"version":3,"file":"index.39437289.js.map"}