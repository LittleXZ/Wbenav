function isURL(t){return!!new RegExp("^((https|http|ftp)://)?(([\\w_!~*'()\\.&=+$%-]+: )?[\\w_!~*'()\\.&=+$%-]+@)?(([0-9]{1,3}\\.){3}[0-9]{1,3}|(localhost)|([\\w_!~*'()-]+\\.)*\\w+\\.[a-zA-Z]{1,6})(:[0-9]{1,5})?((/?)|(/[\\w_!~*'()\\.;?:@&=+$,%#-]+)+/?)$","i").test(encodeURI(t))}const local=localStorage.getItem("cache"),localObj=JSON.parse(local);let $tagAdd=$(".tagAdd"),i=0,hashMap=localObj;function repaint(){$(`\n            <li class="tag tagStyle">\n                <div class="webLogo"><img src="https://favicon.cccyun.cc/${hashMap[i].logo}" alt=""></div>\n                <div class="webUrl">${hashMap[i].url}</div>\n                <div class="close"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close"></use></svg></div>\n            </li>`).insertBefore($tagAdd),i++}void 0===hashMap&&(hashMap=[{logo:"https://github.com",url:"github.com"}]),hashMap.forEach((()=>{repaint()})),$(".tagAdd").on("click",(()=>{let t,e=window.prompt("请输入你要添加的网址");t=-1===e.indexOf("http")?"https://"+e:-1===e.indexOf("https")?e.replace("http://","https://"):e;let a=e.replace("https://","").replace("http://","").replace("www.","");isURL(e)?(hashMap.push({logo:t,url:a}),repaint()):alert("请输入正确的网址")}));let timer=null,startTime="",endTime="",tag=Array.from(document.querySelectorAll(".tag"));tag.forEach((t=>{t.addEventListener("touchstart",(()=>{startTime=+new Date,timer=setTimeout((()=>{$(".tagList .close").css("display","block")}),500)})),t.addEventListener("touchend",(()=>{endTime=+new Date,clearTimeout(timer),endTime-startTime<700&&"none"===$(".tagList .close").css("display")&&console.log("打开网站")}))}));let $tag=$(".tag");$tag.on("click",(t=>{if("svg"===t.target.tagName.toLowerCase()||"use"===t.target.tagName.toLowerCase()||"close"===t.target.className.toLowerCase()){t.currentTarget.setAttribute("style","display:none");let e=0;for(;null!=(t.currentTarget=t.currentTarget.previousSibling);)e++;hashMap.splice(e-1,1),t.stopPropagation()}t.isPropagationStopped()})),window.onbeforeunload=()=>{const t=JSON.stringify(hashMap);localStorage.setItem("cache",t)},$("html").on("click",(t=>{"taglist"!==t.target.className.toLowerCase()&&$(".close").css("display","none")}));
//# sourceMappingURL=index.39437289.js.map
